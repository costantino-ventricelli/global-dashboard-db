# Default values for global-dashboard-db.
replicaCount: 1

image:
  repository: global-dashboard-db
  pullPolicy: IfNotPresent
  # Overrides the image tag whose default is the chart appVersion.
  tag: "latest"

service:
  type: ClusterIP
  port: 8080

resources:
  limits:
    cpu: 500m
    memory: 512Mi
  requests:
    cpu: 250m
    memory: 256Mi

autoscaling:
  enabled: false
  minReplicas: 1
  maxReplicas: 10
  targetCPUUtilizationPercentage: 70

# Probes configuration
probes:
  liveness:
    path: /health/liveness
    initialDelaySeconds: 15
    periodSeconds: 10
  readiness:
    path: /health/readiness
    initialDelaySeconds: 10
    periodSeconds: 10
  startup:
    path: /health/liveness
    initialDelaySeconds: 10
    periodSeconds: 5
    failureThreshold: 30

# Application Specific Configuration
datasources:
  default:
    url: "jdbc:postgresql://global-dashboard-db-postgresql.global-dashboard.svc.cluster.local:5432/global_dashboard"
    username: "postgres"
    password: "postgrespassword"
    driverClassName: "org.postgresql.Driver"
    dialect: "POSTGRES"

kafka:
  bootstrap:
    servers: "kafka-headless.kafka.svc.cluster.local:9092"
  consumers:
    enabled: true

# PostgreSQL Subchart Configuration
postgresql:
  auth:
    username: postgres
    password: postgrespassword
    database: global_dashboard
  primary:
    persistence:
      enabled: false # Use ephemeral storage for dev/test to avoid PVC complexity if not needed
    service:
      ports:
        postgresql: 5432
